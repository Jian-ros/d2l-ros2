# 4.5 ROS2接口介绍

本节小鱼将会带你认识一个新的概念，叫做interfaces即接口。

## 1.什么是接口

**接口其实是一种规范**

你还记得前面几节中，李四和王二分别使用了下面两种数据类型来传递小说和钱，这两种数据类型分别代表字符串和32位二进制的整型数据。

```
std_msgs/msg/String
std_msgs/msg/UInt32
```

李四其实是一个Python节点，而王二是一个C++节点。不同语言对字符串的定义不同，通过接口可以抹平语言差异。

### 使用接口对做机器人有什么好处呢？

小鱼举一个雷达的例子，不同的厂家生产出不同的类型的激光雷达，每种雷达驱动方式、扫描速率等等都不相同。

当机器人进行导航时，需要激光雷达的扫描数据，假如没有统一接口，每次更换一个种类的雷达，都需要重新做程序适配。

于是ROS2中定义了一个统一的接口叫做`sensor_msgs/msg/LaserScan`,现在几乎每个雷达的厂家都会编写程序将自己雷达的数据变成`sensor_msgs/msg/LaserScan`格式，提供给用户使用。

如果雷达的例子不好理解，大家可以把雷达换成手机充电器，USB接口是不是也是一种规范，所有的厂家都按照这种接口进行生产充电器和连接线。



## 2. ROS2接口介绍

我们继续回到之前的例子上来，李四和王二传递小说和钱的时候，我们并没有定义接口，他们直接使用了std_msgs中的String和Uint32。

std_msgs功能包是我们安装ROS2的时候ros2为我们自动安装的一个功能包，除了std_msgs之外，ROS2还定义了很多做机器人常用的接口。

> 使用`ros2 interface package sensor_msgs`命令可以查看某一个接口包下所有的接口

比如：传感器类的消息包`sensor_msgs`

```
打开终端输入：ros2 interface package sensor_msgs
sensor_msgs/msg/JointState  #机器人关节数据
sensor_msgs/msg/Temperature #温度数据
sensor_msgs/msg/JoyFeedbackArray 
sensor_msgs/msg/Joy
sensor_msgs/msg/PointCloud2 #点云
sensor_msgs/msg/MultiEchoLaserScan 
sensor_msgs/msg/NavSatStatus 
sensor_msgs/msg/CameraInfo #相机信息
sensor_msgs/msg/Illuminance 
sensor_msgs/msg/MagneticField
sensor_msgs/srv/SetCameraInfo
sensor_msgs/msg/LaserEcho 
sensor_msgs/msg/RegionOfInterest
sensor_msgs/msg/PointCloud #点云
sensor_msgs/msg/Range #范围
sensor_msgs/msg/RelativeHumidity
sensor_msgs/msg/FluidPressure
sensor_msgs/msg/BatteryState
sensor_msgs/msg/Imu #加速度传感器
sensor_msgs/msg/Image #图像
sensor_msgs/msg/PointField
sensor_msgs/msg/JoyFeedback
sensor_msgs/msg/LaserScan #雷达数据
sensor_msgs/msg/MultiDOFJointState #多自由度关节数据
sensor_msgs/msg/TimeReference 
sensor_msgs/msg/CompressedImage #压缩图像
sensor_msgs/msg/NavSatFix 
sensor_msgs/msg/ChannelFloat32
```

虽然ROS2为我们定义了大量的`拿来就用`的接口，但有时候还是不能满足我们变态的想法，比如：李四想给自己的小说每章开头加一张插图，该怎么办？

办法就是自定义接口。

## 3.ROS2自定义接口

在3.1章节中，小鱼提到过，ROS2提供了四种通信方式：

- 话题-topics
- 服务-services
- Action
- 参数-parameters

每一种通信方式所试用的场景各不相同，除了参数之外，话题、服务和动作(Action)都支持自定义接口，且因为通信方式的不同，所定义接口的也被分为了三种，具体小鱼后面会一一讲解。



