# 4.10 C++服务通信实现(张三买书)

看到张三买书就突然想起`华强买瓜`，但张三是真心买书不是存心找茬。开始之前，我们前先梳理一下买书任务流程。

**一句话：张三拿多少钱钱给王二，王二凑够多少个章节的艳娘传奇给他**

## 1.如何编写C++服务

### 1.1编写C++服务端

- 创建服务节点
- 添加服务接口与依赖
- 创建服务与回调函数
- 实例化服务端并编写回调函数处理请求
- 修改CmkeLists.txt并编译

### 1.2编写C++客户端

- 创建客户端节点

- 添加服务接口与依赖
- 创建客户端、请求函数和请求结果回调函数
- 实例化客户端、编写请求函数和回调函数
- 修改CmkeLists.txt并编译



## 2.服务端（王二）实现

首先是作为二手书提供者的服务端王二节点代码的编写，我们按照上面所说的步骤开始编写程序。

### 2.1 创建服务节点

既然要提供服务，肯定要现有节点，在3.6章节中，我们就



### 2.2 添加服务接口与依赖



### 2.3 创建服务与回调函数



### 2.4 实例化服务端并编写回调函数处理请求



### 2.5 修改CmkeLists.txt并编译





## 3.客户端（张三）实现

### 3.1 创建客户端节点

### 3.2 添加服务接口与依赖

### 3.3 创建客户端、请求函数和请求结果回调函数

### 3.4 实例化客户端、编写请求函数和回调函数

### 3.5 修改CmkeLists.txt并编译



